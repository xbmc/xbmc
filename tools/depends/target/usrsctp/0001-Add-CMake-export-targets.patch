From 403fbfb00eef9284a268d8727e908f8d934e0c31 Mon Sep 17 00:00:00 2001
From: Garrett Brown <themagnificentmrb@gmail.com>
Date: Fri, 28 Jul 2023 17:11:47 -0700
Subject: [PATCH 1/3] Add CMake export targets

---
 usrsctplib/CMakeLists.txt | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

diff --git a/usrsctplib/CMakeLists.txt b/usrsctplib/CMakeLists.txt
index 93f6f4d..455b468 100644
--- a/usrsctplib/CMakeLists.txt
+++ b/usrsctplib/CMakeLists.txt
@@ -184,8 +184,6 @@ list(APPEND usrsctp_sources
 
 add_library(usrsctp ${usrsctp_sources} ${usrsctp_headers})
 
-target_include_directories(usrsctp PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
-
 if(SCTP_USE_MBEDTLS_SHA1)
 	target_include_directories(usrsctp PRIVATE ${MBEDTLS_INCLUDE_DIRS})
 endif()
@@ -209,9 +207,17 @@ set_target_properties(usrsctp PROPERTIES SOVERSION ${SOVERSION_SHORT} VERSION ${
 # INSTALL LIBRARY AND HEADER
 #################################################
 
-install(TARGETS usrsctp DESTINATION ${CMAKE_INSTALL_LIBDIR})
+install(TARGETS usrsctp EXPORT UsrsctpConfig DESTINATION ${CMAKE_INSTALL_LIBDIR})
 install(FILES usrsctp.h DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
 
+# Export Targets
+install(
+	EXPORT UsrsctpConfig
+	FILE UsrsctpConfig.cmake
+	NAMESPACE Usrsctp::
+	DESTINATION lib/cmake/Usrsctp
+)
+
 #################################################
 # GENERATE AND INSTALL PKG-CONFIG FILE
 #################################################
-- 
2.49.0


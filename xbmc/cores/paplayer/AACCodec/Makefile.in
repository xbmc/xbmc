OBJS += AACCodec.o utils.o
CFLAGS +=-D_LINUX -fPIC -Ialac_decoder -I../../dvdplayer/Codecs/libfaad2/libfaad -I../../dvdplayer/Codecs/libfaad2/common/mp4ff -I../../dvdplayer/Codecs/libfaad2/include -O2

DIRS=alac_decoder

LIB=../../../../system/players/paplayer/AACCodec-@ARCH@.so

include ../../../../Makefile.include

lib: $(LIB)

AACCodec-osx.so: compile AACCodec.o utils.o
	$(CC) -shared -bundle -flat_namespace -undefined suppress -o $@ *.o alac_decoder/*.o libfaad/*.o mp4ff/*.o

$(LIB): $(OBJS)
	make -C alac_decoder
	$(CC) -shared -o $@ *.o alac_decoder/*.o ../../dvdplayer/Codecs/libfaad2/libfaad/.libs/*.o ../../dvdplayer/Codecs/libfaad2/common/mp4ff/.libs/*.o `cat ../../DllLoader/exports/wrapper.def` ../../DllLoader/exports/wrapper.o

find_all_sources(. bus_SRCS)
if(APPLE)
  find_all_sources(osx bus_os_SRCS)
elseif(WIN32)
  find_all_sources(win32 bus_os_SRCS)
else()
  if(HAVE_LIBUSB)
    list(APPEND bus_os_SRCS linux/PeripheralBusUSBLibUSB.cpp)
    list(APPEND bus_os_SRCS linux/PeripheralBusUSBLibUSB.h)
  endif()
  if(HAVE_LIBUDEV)
    list(APPEND bus_os_SRCS linux/PeripheralBusUSBLibUdev.cpp)
    list(APPEND bus_os_SRCS linux/PeripheralBusUSBLibUdev.h)
  endif()
endif()
add_sources(${bus_SRCS} ${bus_os_SRCS})

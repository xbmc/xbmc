<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Mbedthis Appweb Public API</title>

<!-- BeginDsi "dsi/meta.html" -->
	<meta name="keywords" content="embedded web server, web server software, 
		embedded HTTP, application web server, embedded server,
		small web server, HTTP server, library web server, library HTTP,
		HTTP library" />
	<meta name="description" content="Mbedthis Sofware provides 
		open source embedded web servers for devices and applications." />
	<meta name="robots" content="index,follow" />
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
<!-- EndDsi -->

  

<!-- BeginDsi "dsi/js.html" -->
	<script language="JavaScript" type="text/javascript">
		document._ROOT_="../../../";
	</script>
<!-- EndDsi -->

  

<!-- BeginDsi "dsi/style.html" -->
	<link rel="stylesheet" type="text/css" href="../../../css/doc.css">
<!-- EndDsi -->

</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0">
  

<!-- BeginDsi "dsi/navTop.html" -->
	<div class="background">
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td>
					<a name="top"></a>
					<img src="../../../images/backLeft.png" width="400" 
						height="93" border="0" ismap usemap="#home" /><br />
					<map name="home">
						<area coords="0,0,93,93" 
						href="http://www.mbedthis.com/index.html" />
					</map>
				</td>
				<td width="100%">
					<img src="../../../images/backMiddle.png" width="100%" 
						height="93" border="0" /><br />
				</td>
				<td>
					<img src="../../../images/backRight.png" width="354" 
						height="93" border="0" /><br />
				</td>
			</tr>
		</table>
	</div>

	<div class="navTop"> 
		<table cellpadding="0" cellspacing="0" border="0" align="top">
			<tr>
				<td valign="bottom"> 
					<a href="http://www.mbedthis.com/" class="navTop"
					>Mbedthis Home</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../product/index.html" class="navTop"
					>Documentation Home</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../guide/appweb/users/admin/overview.html" class="navTop"
					>Administration</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../api/gen/appweb/overview.html" class="navTop"
					>Programmers Reference</a>
				</td>
				<td valign="bottom"> 
<!--
					<form class="smallText" action="../../../search.php" 
						method="post" name="searchForm" id="searchForm">
					</form>
					&nbsp; 
					<input class="smallText" type="text" name="search" 
						align="right" id="searchInput" size="15" maxlength="50"
						value="Sorry, No Searching" />
-->
				</td>
			</tr>
		</table>
	</div>

<!-- EndDsi -->

  <div class="navHistory">
    

<!-- BeginDsi "dsi/navHistory.html" -->
	<a href="../../../product/index.html">Documentation Home</a> &gt; 
<!-- EndDsi -->

     <a href="overview.html">Programmers Reference</a> &gt; <!-- HISTORY -->
  </div>

  <table class="content" border="0" height="100%" width="100%">
    <tr>
      <td class="content">
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li class="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>Mpr Class Reference</h1><!-- doxytag: class="Mpr" --><a href="classMpr-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
The Mbedthis Portable Runtime (MPR). 
<p>
The MPR provides a cross-platform embeddable set of management and communication services that form a portable run-time core. It provides management for logging, lists, memory, sockets, tasks, timers, threads. It also provides a foundation of safe routines for secure programming, that prevent help minimize buffer overflows and other security threats. The MPR APIs provide constants, structure and class definitions and can be used in both C and C++ programs.<h2><a class="anchor" name="types">
Data Types</a></h2>
The Standard MPR types are: bool, char, uchar, short, ushort, int, uint, long, ulong, int64, uint64, float, double, MprStr<p>
To differentiate between "C" strings that are dynamically allocated and plain C pointers, we use Str for dynamically allocated strings. In classes, Str means the class owns the storage for the string. When used for the return value or parameter of a method, it means the caller must free the memory using mprFree.<h2><a class="anchor" name="allocation">
Memory Allocation</a></h2>
APIs that return dynamically allocated strings require the caller to pass a pointer to hold the allocated buffer as a parameter. APIs that require a user supplied buffer, always require a buffer maximum length parameter. APIs that return statically allocated strings will return them as a return value.<p>
<dl class="warning" compact><dt><b>Warning:</b></dt><dd>Most of these APIs are not thread-safe. Be careful if you modify or delete the underlying data while accessing the resource from another thread.</dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#1ce06d5992b32b875603b7f993599fba">addListener</a> (<a class="el" href="classMprLogListener.html">MprLogListener</a> *lp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#eeb825109e138b2319bea27ce6840686">getAsyncSelectMode</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#464fd6b97e606f910efa921d33d22996">getIdleTime</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#5c8c63265ea5539338579fda6a9d8f51">isExiting</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#48de2d3e96c3ffec54fe0cabb30c6712">Mpr</a> (char *appName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#313a591d11317deead35ce04c69f0159">runTasks</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#54c0e4883f02080f17467b47396cbf8e">runTimers</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#e6ef213d30375f179850052e72bceee9">serviceEvents</a> (bool loopOnce, int maxTimeout)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#7c912b4b442efb0af55de662a403371b">setAsyncSelectMode</a> (bool on)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#699ce0b9df6bbb896b450ce6426ed4a9">setHwnd</a> (HWND appHwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#48ed8403e08aa46b82d209f31015dcfc">setLogSpec</a> (char *spec)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#7369ec1793b79e065a3502278e3f4b71">setSocketHwnd</a> (HWND socketHwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#b61852ae1b6e58d971c1597fcde34f36">setSocketMessage</a> (int msgId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#1625cf5528ee7c5ae745c49111731798">start</a> (int startFlags=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#b6163dc4352dbad2e17a04533ab2b217">stop</a> (bool immediateStop)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#02ecec27989fb1df22b7807d86691e17">terminate</a> (bool graceful=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMpr.html#5041e6581afb4140083a0bb6fd39d111">~Mpr</a> ()</td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="48de2d3e96c3ffec54fe0cabb30c6712"></a><!-- doxytag: member="Mpr::Mpr" ref="48de2d3e96c3ffec54fe0cabb30c6712" args="(char *appName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mpr::Mpr           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>appName</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Create an MPR instance for the application. </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>To support Appweb, an application needs the services of the Mbedthis Portable Runtime (MPR). This call activates the MPR and must be issued prior to any other Appweb API call. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>appName</em>&nbsp;</td><td>Name of the application. This is used for internal error reporting from Appweb and the MPR. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Zero if successful. Otherwise returns a negative MPR error code. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html#5041e6581afb4140083a0bb6fd39d111">~Mpr</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="5041e6581afb4140083a0bb6fd39d111"></a><!-- doxytag: member="Mpr::~Mpr" ref="5041e6581afb4140083a0bb6fd39d111" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mpr::~Mpr           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Delete the MPR object </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>This call will shutdown the MPR and terminate all MPR services. An application should call mprDeleteMpr before exiting. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Mbedthis Portable Runtime (MPR).">Mpr</a> </dd></dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="1ce06d5992b32b875603b7f993599fba"></a><!-- doxytag: member="Mpr::addListener" ref="1ce06d5992b32b875603b7f993599fba" args="(MprLogListener *lp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mpr::addListener           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMprLogListener.html">MprLogListener</a> *&nbsp;</td>
          <td class="paramname"> <em>lp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Register a listener for MPR log messages </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Listeners may register for MPR error and trace messages. Each registered listener will be called for all messages. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lp</em>&nbsp;</td><td>Log listener to add </td></tr>
  </table>
</dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>The MPR logging mechanism handles both trace at various levels and error messages. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="user" compact><dt><b><b>Configure</b> options:</b></dt><dd>Requires BLD_FEATURE_LOG. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="mpr_8h.html#200078e664785621298538f0e986ebe9">mprError</a>, mprLog </dd></dl>

</div>
</div><p>
<a class="anchor" name="eeb825109e138b2319bea27ce6840686"></a><!-- doxytag: member="Mpr::getAsyncSelectMode" ref="eeb825109e138b2319bea27ce6840686" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Mpr::getAsyncSelectMode           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Return the current async select mode </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Return TRUE if the application is using windows async message select rather than the Unix select mechanism. </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if using async select. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html#7c912b4b442efb0af55de662a403371b">setAsyncSelectMode</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="464fd6b97e606f910efa921d33d22996"></a><!-- doxytag: member="Mpr::getIdleTime" ref="464fd6b97e606f910efa921d33d22996" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Mpr::getIdleTime           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Return the time to wait till the next timer or event is due. </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Application event loops should call getIdleTime to determine how long they should sleep waiting for the next event to occur. </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the number of milli-seconds till the next timer is due. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Mbedthis Portable Runtime (MPR).">Mpr</a>, <a class="el" href="classMpr.html#54c0e4883f02080f17467b47396cbf8e">runTimers</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="5c8c63265ea5539338579fda6a9d8f51"></a><!-- doxytag: member="Mpr::isExiting" ref="5c8c63265ea5539338579fda6a9d8f51" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Mpr::isExiting           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Determine if the application is exiting </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Returns TRUE if the application has been instructed to exit via <a class="el" href="classMpr.html#02ecec27989fb1df22b7807d86691e17">Mpr::terminate</a>. The applications main event loop should call isExiting whenever an event is detected. If isExiting returns TRUE, the application should gracefully exit. </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns TRUE if the application should exit. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Mbedthis Portable Runtime (MPR).">Mpr</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="313a591d11317deead35ce04c69f0159"></a><!-- doxytag: member="Mpr::runTasks" ref="313a591d11317deead35ce04c69f0159" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Mpr::runTasks           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Execute all runable tasks </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>If an application is running single-threaded, a call to runTasks will cause all queued Tasks to run. If multi-threaded, this call will have no effect. Application event loops should call runTasks before sleeping to ensure all tasks have had a chance to </dd></dl>

</div>
</div><p>
<a class="anchor" name="54c0e4883f02080f17467b47396cbf8e"></a><!-- doxytag: member="Mpr::runTimers" ref="54c0e4883f02080f17467b47396cbf8e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Mpr::runTimers           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Check timers and run all due timers. </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>The runTimers method should be called by event loops to call any timers that are due. </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns TRUE if any timers were run. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Mbedthis Portable Runtime (MPR).">Mpr</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="e6ef213d30375f179850052e72bceee9"></a><!-- doxytag: member="Mpr::serviceEvents" ref="e6ef213d30375f179850052e72bceee9" args="(bool loopOnce, int maxTimeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mpr::serviceEvents           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>loopOnce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxTimeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Service pending I/O events </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>The MPR includes a unified I/O event service which efficiently processes I/O and invokes handlers for the underlying socket or file descriptors (on Unix). The MPR Socket layer will automatically integrate with the event mechanism so that I/O will cause the socket callback handlers to be invoked.</dd></dl>
mprServiceEvents is the primary mechanism to wait for I/O events and to cause them to be serviced. When called in multi-threaded applications, it will use a thread pool to continually service events until the application is instructed to exit via mprTerminate. When used in single-threaded applications, it is usually used within a larger custom event loop in the application. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>loopOnce</em>&nbsp;</td><td>Determines if mprServiceEvents will service only the current events or if it continue to service future events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxTimeout</em>&nbsp;</td><td>If <em>loopOnce</em> is TRUE, <em>maxTimeout</em> specifies the time to wait current events or if it continue to service future events. </td></tr>
  </table>
</dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>Callers have several options when integrating the MPR and products using the MPR. You can: <ul>
<li>run a dedicated thread servicing events </li>
<li>call serviceEvents from your own event loop </li>
<li>create your own routine to service events using <a class="el" href="classMpr.html#e6ef213d30375f179850052e72bceee9">serviceEvents()</a> as a prototype. </li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Mbedthis Portable Runtime (MPR).">Mpr</a>, serviceIO </dd></dl>

</div>
</div><p>
<a class="anchor" name="7c912b4b442efb0af55de662a403371b"></a><!-- doxytag: member="Mpr::setAsyncSelectMode" ref="7c912b4b442efb0af55de662a403371b" args="(bool on)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mpr::setAsyncSelectMode           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>on</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Set the current async select mode </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Determine if the application is using windows async message select rather than the Unix select mechanism. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>on</em>&nbsp;</td><td>If TRUE, enable async select mechanism. </td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html#eeb825109e138b2319bea27ce6840686">getAsyncSelectMode</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="699ce0b9df6bbb896b450ce6426ed4a9"></a><!-- doxytag: member="Mpr::setHwnd" ref="699ce0b9df6bbb896b450ce6426ed4a9" args="(HWND appHwnd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mpr::setHwnd           </td>
          <td>(</td>
          <td class="paramtype">HWND&nbsp;</td>
          <td class="paramname"> <em>appHwnd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Set the Window handle for the application </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Define the window handle for the application that the MPR and Appweb will use. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>appHwnd</em>&nbsp;</td><td>Application window handle </td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html#7369ec1793b79e065a3502278e3f4b71">setSocketHwnd</a>, serviceIO </dd></dl>

</div>
</div><p>
<a class="anchor" name="48ed8403e08aa46b82d209f31015dcfc"></a><!-- doxytag: member="Mpr::setLogSpec" ref="48ed8403e08aa46b82d209f31015dcfc" args="(char *spec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Mpr::setLogSpec           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>spec</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Define a log file specification </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Creates the default log file specification for the MPR to use when logging events. Typically this will be via the default <a class="el" href="classMprLogToFile.html" title="Log MPR messages to a file.">MprLogToFile</a> log listener. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>spec</em>&nbsp;</td><td>Log file specification of the format: <div class="fragment"><pre class="fragment">        fileName[:level][[,moduleName[:level]]...][.maxSize]
</pre></div></td></tr>
  </table>
</dl>
The <em>level</em> argument defines a message verbosity level and must be between 0 and 9 with 9 being the most verbose. A good normal level is 2. The <em>maxSize</em> specification is the size of the logfile in MB before rotating. When rotated, the old file will have a ".old". Module names (if specified) are internal MPR names such as <b>socket</b>. This allows you to log messages from only designated modules. Each module may define its own trace level. <dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns zero if successful. Otherwise returns a negative MPR error code. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="user" compact><dt><b><b>Configure</b> options:</b></dt><dd>Requires BLD_FEATURE_LOG. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMprLogListener.html" title="Represent a listener for MPR log messages.">MprLogListener</a>, <a class="el" href="classMprLogToFile.html" title="Log MPR messages to a file.">MprLogToFile</a>, mprLog, <a class="el" href="mpr_8h.html#200078e664785621298538f0e986ebe9">mprError</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="7369ec1793b79e065a3502278e3f4b71"></a><!-- doxytag: member="Mpr::setSocketHwnd" ref="7369ec1793b79e065a3502278e3f4b71" args="(HWND socketHwnd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mpr::setSocketHwnd           </td>
          <td>(</td>
          <td class="paramtype">HWND&nbsp;</td>
          <td class="paramname"> <em>socketHwnd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Set the socket handle for the application </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Define the window handle to use for socket events. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>socketHwnd</em>&nbsp;</td><td>Socket window handle </td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html#699ce0b9df6bbb896b450ce6426ed4a9">setHwnd</a>, serviceIO </dd></dl>

</div>
</div><p>
<a class="anchor" name="b61852ae1b6e58d971c1597fcde34f36"></a><!-- doxytag: member="Mpr::setSocketMessage" ref="b61852ae1b6e58d971c1597fcde34f36" args="(int msgId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mpr::setSocketMessage           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>msgId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Set the windows message type to use for socket messages </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Define the message type that the MPR will use in response to socket I/O events. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msgId</em>&nbsp;</td><td>Windows message type. </td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html#699ce0b9df6bbb896b450ce6426ed4a9">setHwnd</a>, <a class="el" href="classMpr.html#7369ec1793b79e065a3502278e3f4b71">setSocketHwnd</a>, serviceIO </dd></dl>

</div>
</div><p>
<a class="anchor" name="1625cf5528ee7c5ae745c49111731798"></a><!-- doxytag: member="Mpr::start" ref="1625cf5528ee7c5ae745c49111731798" args="(int startFlags=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Mpr::start           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>startFlags</em> = <code>0</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Starts the MPR services </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>After creating the MPR object via mprCreateMpr, this call will fully initialize the MPR and to start all services. These services include thread services, the thread pool, timer services, select handlers and command execution services. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>startFlags</em>&nbsp;</td><td>Or the following flags: <ul>
<li>MPR_SERVICE_THREAD to create a service thread to run select. The thread will call mprServiceEvents to process I/O events. </li>
<li>MPR_KILLABLE to create a pid file to support killing running MPRs. </li>
</ul>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns zero if successful, otherwise returns a negative MPR error code. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Mbedthis Portable Runtime (MPR).">Mpr</a>, <a class="el" href="classMpr.html#b6163dc4352dbad2e17a04533ab2b217">stop</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="b6163dc4352dbad2e17a04533ab2b217"></a><!-- doxytag: member="Mpr::stop" ref="b6163dc4352dbad2e17a04533ab2b217" args="(bool immediateStop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Mpr::stop           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>immediateStop</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Stop the MPR services </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Applications should call stop before exiting to gracefully terminate MPR processing. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Mbedthis Portable Runtime (MPR).">Mpr</a>, <a class="el" href="classMpr.html#1625cf5528ee7c5ae745c49111731798">start</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="02ecec27989fb1df22b7807d86691e17"></a><!-- doxytag: member="Mpr::terminate" ref="02ecec27989fb1df22b7807d86691e17" args="(bool graceful=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mpr::terminate           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>graceful</em> = <code>1</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Instruct the application to exit </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Calling terminate will cause the MPR event loop to exit. When called with the <em>graceful</em> parameter set to TRUE, mprTerminate will set the <em>isExiting</em> flag and take no further action. The MPR event loop or the applications event loop will check this flag by calling mprIsExiting to determine if the application should exit. If <em>graceful</em> is FALSE, mprTerminate will call <em>exit</em> for an immediate application termination. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>graceful</em>&nbsp;</td><td>If FALSE, call exit and terminate the application immediately. If TRUE, set the MPR <em>isExiting</em> flag. </td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html#5c8c63265ea5539338579fda6a9d8f51">isExiting</a>, <a class="el" href="classMpr.html#e6ef213d30375f179850052e72bceee9">serviceEvents</a> </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>mpr/<a class="el" href="mpr_8h.html">mpr.h</a><li>mpr/<a class="el" href="mpr_8cpp.html">mpr.cpp</a><li>mpr/<a class="el" href="mpr_8dox.html">mpr.dox</a><li>mpr/UNIX/<a class="el" href="UNIX_2daemon_8cpp.html">daemon.cpp</a><li>mpr/UNIX/<a class="el" href="UNIX_2os_8cpp.html">os.cpp</a><li>mpr/VXWORKS/daemon.cpp<li>mpr/VXWORKS/<a class="el" href="VXWORKS_2os_8cpp.html">os.cpp</a><li>mpr/WIN/<a class="el" href="WIN_2os_8cpp.html">os.cpp</a></ul>
	  </td>
      <td class="contentSep"></td>

      <td class="contentSideBar">
        <div class="linkSection">
          <h2>See Also</h2>

<!-- BeginDsi "dsi/api.html" -->
					<a href="../../../api/gen/appweb/overview.html">API Overview</a><br>
					<a href="../../../api/gen/appweb/c-api.html">C API</a><br>
					<a href="../../../api/gen/appweb/cplusplus-api.html">C++ API</a><br>
					<a href="../../../api/gen/appweb/javascript-api.html">JavaScript API</a><br>
					<a href="../../../api/gen/appweb/annotated.html">Class List</a><br>
					<a href="../../../api/gen/appweb/files.html">File List</a><br>
<!-- EndDsi -->

        </div>
      </td>
    </tr>
</table>

<!-- BeginDsi "dsi/terms.html" -->
<p class="terms"> 
	<a href="../../../product/copyright.html"
		>&copy; Mbedthis Software LLC, 2003-2008. All 
		rights reserved. Mbedthis is a trademark of Mbedthis Software LLC.</a>
</p>
<!-- EndDsi -->

</body>
</html>
